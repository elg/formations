<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>reveal.js - The HTML Presentation Framework</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h1>Linux</h1>
					<h3>Administration et maintenance</h3>
					<p>
					<small>Par <a href="mailto:raphael.berlamont@librit.fr">Raphaël Berlamont</a> / <a href="http://www.librit.fr">LibrIT</a></small>
					</p>
				</section>

				<!-- Example of nested vertical slides -->
				<section>
				<section data-background="#FFFFFF">
						<h2>LibrIT ?</h2>
						<p>Fondée en 2011</p>
						<p>Société de Service en Logiciel Libre</p>
						<p>(SSLL? Oô)</p>
						<p>
							<a href="http://www.librit.fr" target="_blank">
								<img data-src="./medias/images/librit-logo.jpg" alt="LibrIT logo">
							</a>
						</p>
						<br>
					</section>
					<section>
						<h2>Qu'est-ce qu'une SSLL ?</h2>
						<p>Société spécialisée dans de Logiciel Libre</p>
						<p>Pléthorde (LINAGORA, Bluemind, Alcove, easter-eggs…)</p>
						<p></p>
					</section>
					<section>
						<h2>Qu'est-ce qu'un logiciel libre ?</h2>
						<p>Un logiciel libre est un logiciel dont l'utilisation, l'étude, la modification et la duplication en vue de sa diffusion sont permises, techniquement et légalement.</p>
						<p>(Dixit <a href="http://fr.wikipedia.org/wiki/Logiciel_libre">wikipedia</a>)</p>
						<br>
						<a href="http://www.gnu.org" target="_blank">
							<img width="261" height="259" data-src="./medias/images/gnu-logo.svg" alt="GNU logo">
						</a>
					</section>
				</section>

				<section>
						<h2>Votre hôte</h2>
						<h4><p>Administrateur sytème et réseau</p></h4>
						<p>Généraliste dans le Logiciel Libre</p>
						<p>+ de 10 ans d'expériences</p>
						<p>Dans de petites structures, des multinationnales, et des organismes publiques (ministères, armée…)</p>
				</section>

				<section>
					<section>
						<h2>Linux ?</h2>
						<h4><p>Au sens large</p></h4>
						<p class="fragment">Un système d'exploitation <br>(on parle alors de <u>distributions</u> Linux)</p>
						<h4><p>Au sens précis</p></h4>
						<p class="fragment">Un noyau<br>(ou kernel : il s'occupe de fournir aux logiciels une interface pour utiliser le matériel)</p>
						<p><img data-src="./medias/images/tux_small.png" style="background:none; border:none; box-shadow:none;" alt="Tux penguin">
						</p>
					</section>
					<section>
						<h2>Linux ?</h2>
						<h4><p>Histoire</p></h4>
						<p class="fragment">Créé en 1991 par Linus Torvald<br><img data-src="./medias/images/Linus_Torvalds.jpeg" style="background:none; border:none; box-shadow:none;" alt="Linus Torvald Portrait"></p>
						<p class="fragment">Origine ludique</p>
						<p class="fragment">1991 : ~10k lignes de code</p>
						<p class="fragment">2015 : ~16M lignes de code<p>

					</section>
						

				</section>
				<section>
				<h2>Caractéristiques d'un Unix<br>(et donc de Linux)</h2>
					<p>Elles regroupent un noyau et des outils</p>
					<p>Chaque distribution a ses caractéristiques<br>(outils, customisations…)</p>
					<p class="fragment">Les plus connues :</p>
					<table class="fragment">
						<tbody>
							<tr>
								<td>Redhat</th>
								<td>Fedora</td>
								<td>Centos</td>
							</tr>
							<tr>
								<td>Ubuntu</td>
								<td>Debian</td>
								<td>Knoppix</td>
							<tr>
							<tr>
								<td>Gentoo</td>
								<td>ArchLinux</td>
								<td>LFS</td>
							<tr>
						</tbody>
					</table>
					<p class="fragment">cf : <a href="http://distrowatch.com/">distrowatch</a> </p>
				</section>
				<section data-background="#EEEEEE">
					<section>
						<h1>La gestion des disques</h1>
						<h2>MBR / GPT<br>késako ?</h2>
					</section>
					<section>
						<h2>MBR</h2>
						<p class="fragment">MBR : Master Boot Record</p>
						<p class="fragment">512 premiers octets du disque (1er secteur)</p>
						<p class="fragment">Contient la table des partitions</p>
						<p class="fragment">Contient le boot loader</p>
						<p class="fragment">Limite historique (<a href="http://en.wikipedia.org/wiki/Cylinder-head-sector">CHS</a>) à 2To</p>
						<p class="fragment">Max 4 partitions primaires<br>(dont une peut être "étendue" et contenir un nombre illimité de partition "logique")</p>
					</section>
					<section>
						<h2>GPT</h2>
						<p class="fragment">GPT : GUUID Partition Table</p>
						<p class="fragment">Bien plus complexe que le MBR</p>
						<p class="fragment">Embarque un système de checksum</p>
						<p class="fragment">Utilise exclusivement LBA</p>
						<p class="fragment">Limite à + 9ZB (1ZB = 10<sup><small>21</small></sup>)</p>
						<p class="fragment">128 partitions possibles (de base)</p> 
					</section>
					<section>
						<h2>MBR / GPT<br>Comparaison</h2>
						<table>
							<tr>
								<td>MBR</td>
								<td>GPT</td>
							</tr>
							<tr>
								<td><img height="350px" data-src="./medias/images/mbr.gif" alt="MBR schema">
									<br><small>©technet.microsoft.com</small>
								</td>
								<td><img height="350px" data-src="./medias/images/GUID_Partition_Table_Scheme.svg" alt="GPT schema">
									<br><small>©wikipedia</small>
								</td>
							</tr>
						</table>
					</section>
					<section>
						<h2>Tout est fichier…</h2>
						<p class="fragment">Premier disque : /dev/sda</p>
						<p class="fragment">8<sup><small>ième</small></sup> partition du troisième disque : /dev/sdc8</p>
						<p class="fragment">Anciens systèmes utilisant le driver IDE : /dev/hdXY</p>
					</section>
				</section>
				<section data-background="#EEEEEE">
					<section>
						<h1>La gestion des disques</h1>
						<h2>Les systèmes de fichiers</h2>
					</section>
					<section>
						<h2>ext(2-3-4)</h2>
						<p class="fragment">Systèmes de fichiers historique des distributions Linux</p>
						<p class="fragment">Attention : Nombre limité d'inodes</p>
					</section>
					<section>
						<h2>ext3</h2>
						<p class="fragment">Journalisé</p>
						<p class="fragment">Redimensionnable à chaud</p>
						<p class="fragment">Taille max d'un fichier : 16GiB à 2TiB</p>
						<p class="fragment">Taille max d'une partition : 4TiB à 32TiB</p>
						<p class="fragment">obselète</p>
					</section>
					<section>
						<h2>ext4</h2>
						<p class="fragment">Caractéristiques d'ext3</p>
						<p class="fragment">Taille max d'un fichier : 16TiB</p>
						<p class="fragment">Taille max d'une partition : 16TiB à 1EiB</p>
						<p class="fragment">Actuellement par défaut sur la majorité des distributions</p>
					</section>
					<section>
						<h2>Btrfs</h2>
						<p class="fragment">Système de fichier futur de Linux<br>(actuel pour certaines distributions)</p>
						<p class="fragment">COW</p>
						<p class="fragment">Features en veux-tu en voilà<br>(defrag, loadblancing, RAID, dedup…)</p>
						<p class="fragment">En 2015, pas encore par défaut sur les distribs</p>
					</section>
					<section>
						<h2>Les autres…</h2>
						<ul>
							<li class="fragment">nfs : système de fichier réseau unix</li>
							<li class="fragment">cifs : système de fichier réseau «Samba» (partage windows)</li>
							<li class="fragment">iso9660 : système de fichier des galettes (CD/DVD/BR…)</li>
							<li class="fragment">vfat : fat32 de M$</li>
							<li class="fragment">ReiserFS, jfs, xfs, zfs : autres FS…</li>
						</ul>
					</section>
				</section>
				<section data-background="#EEEEEE">
					<section>
						<h1>La gestion des disques</h1>
						<h2>Les outils…</h2>
					</section>
					<section>
						<h2>… pour le partitionnement</h2>
						<ul>
							<li class="fragment">fdisk : partitionnement MBR en mode interactif</li>
							<li class="fragment">gdisk : partitionnement GPT en mode interactif</li>
							<li class="fragment">gparted : partitionnement graphique</li>
						</ul>
					</section>
					<section>
						<h2>…pour les systèmes de fichiers</h2>
						<ul>
							<li class="fragment">df : Disk Free, montre l'espace disponible</li>
							<li class="fragment">du : Disk Usage, montre l'espace utilisé par un fichier / répertoire</li>
							<li class="fragment">resize2fs : redimensionne un système de fichier (pour ext2-3-4)</li>
							<li class="fragment">fsck : vérifie le système de fichiers</li>
							<li class="fragment">mkfs : créé le système de fichier (format)</li>
							<li class="fragment">cryptsetup : chiffrement d'un système de fichiers</li>
							<li class="fragment">mount : permet de «monter» une partition</li>
						</ul>
					</section>
				</section>
				<section data-background="#EEEEEE">
					<section>
						<h1>La gestion des disques</h1>
						<h2>mount ?</h2>
					</section>
					<section>
						<h2>unix : the big difference</h2>
						<p class="fragment">Contrairement à Windows, il n'y a pas de C: | D: | Z:…</p>
						<p class="fragment">Une racine (une partition)</p>
						<p class="fragment">Cette racine contient des répertoires</p>
						<p class="fragment">Ces répertoires peuvent pointer sur une partiton</p>

					</section>
					<section>
						<h2>Un schéma vaut tous les discours…</h2>
						<p class="fragment"><img width="640" data-src="./medias/images/mount.gif"></p>
					</section>
					<section>
						<h2>Comment garder tout ça au boot ?</h2>
						<p class="fragment">/etc/fstab</p>
						<table class="fragment" style="font-size:20px;">
							<tr>
								<td>/dev/mapper/vm1-usr</td><td>/usr</td><td>ext3</td><td>defaults</td><td>0</td><td>2</td>
							</tr>
							<tr>
								<td>partition/disque</td><td>point de montage</td><td>format</td><td>option de<br>montage</td><td>sauvegarde</td><td>réparation/test<br>(man fstab)</td>
							</tr>
						</table>
					</section>
				</section>
				<section data-background="#EEEEEE">
					<section>
						<h1>La gestion des disques</h1>
						<h2>LVM</h2>
					</section>
					<section>
						<h2>Dans les grandes lignes</h2>
						<p class="fragment">Permet d'aggréger plusieurs volumes physiques (PV)</p>
						<p class="fragment">L'aggrégat de ces volumes physiques donne un groupe de volumes (VG)</p>
						<p class="fragment">Ces groupes de volumes peuvent être divisés en volumes logiques (LV)</p>
						<p class="fragment">Les LV apparaissent dans /dev/NOM_DU_VG/NOM_DU_LV</p>
					</section>
					<section>
						<h2>Un schéma vaut tous les discours…</h2>
						<p class="fragment"><img width="640" data-src="./medias/images/LVM.png"><br><small>©helios.de</small></p>
					</section>
					<section>
						<h2>Les outils pour gérer LVM</h2>
						<ul>
							<li class="fragment">pvcreate : initialise un volume physique en «PV» LVM</li>
							<li class="fragment">vgcreate : créé un groupe de volumes (VG) avec un ou plusieurs PV</li>
							<li class="fragment">lvcreate : créé un volume logique (LV) en piochant dans un VG</li>
							<li class="fragment">vgresize : redimensionne un groupe de volume</li>
							<li class="fragment">lvresize : redimensionne un volume logique</li>
							<li class="fragment">vgdisplay : affiche les informations d'un groupe de volume (espace libre…)</li>
							<li class="fragment">man lvm :)</li>
						</ul>
					</section>
				</section>
				<section data-background="#EEEEEE">
					<section>
						<h1>La gestion des disques</h1>
						<h2>Mise en pratique…</h2>
					</section>
					<section>
						<h2>À vous de jouer :<br>(25 minutes)</h2>
						<ul><small>
							<li>Ajouter 2 disques à votre VM (200Mo chacun minimum)</li>
							<li>Partitionner le disque en 2 volumes</li>
							<li>Formater la première partition en ext4</li>
							<li>Monter la dans /mnt/tp_linux</li>
							<li>Initialiser la seconde partition en tant que PV</li>
							<li>Créer un VG avec ce PV</li>
							<li>Créer à partir de ce VG 2 LV de 100Mo qui seront nommés «toto» et «titi»</li>
							<li>Formater ces deux nouveaux LV (en ext3 et xfs (ou autre))</li>
							<li>Les monter respectivement dans /mnt/tp_linux/toto_ext3 et /mnt/tp_linux/titi_xfs</li>
							<li>M'appeler pour me dire que c'est fait :)</li>
						</small></ul>
					</section>
				</section>
				<section data-background="#8888EE">
					<section>
						<h1>Le démarrage</h1>
					</section>
					<section>
						<h2>Vue d'ensemble</h2>
						<img width="400" data-src="./medias/images/Linux_Boot_Schema.png">
						<br><small><i>source http://commons.wikimedia.org</i></small>
					</section>
					<section>
						<h2>BIOS</h2>
						<p class="fragment">Accronyme de Basic Input Output System</p>
						<p class="fragment">Ensemble de fonctions contenues dans une mémoire ROM</p>
						<p class="fragment">Permet d'interroger le hard (POST - Power On Self Test)</p>
						<p class="fragment">Charge le premier secteur du disque</p>
						<p class="fragment">Il est remplacé petit à petit par l'UEFI</p>
					</section>
					<section>
						<h2>Le BootLoader</h2>
						<p class="fragment">Se situe dans le MBR :
						<br><img height="50%" data-src="./medias/images/bootloader.png"></p>
						<p class="fragment">En simple : permet de charger un executable<br>(dans notre cas, le noyeau Linux)</p>
					</section>
					<section>
						<h2>Les principaux BootLoader</h2>
						<p class="fragment">Il en existe plusieurs :</p>
						<ul class="fragment">
							<li>GRUB (GRant Unified Bootloader)</li>
							<li>LiLo (Linux Loader)</li>
							<li>IsoLinux (Boot sur CD)</li>
							<li>NTLDR (Windows jusqu'à XP)</li>
							<li>winload.exe (Windows à partir de Vista)</li>
						</ul>
					</section>
					<section>
						<h2>Le kernel (ou noyau)</h2>
						<p class="fragment">Est chargé par le bootloader</p>
						<p class="fragment">Détecte et initialise le hardware</p>
						<p class="fragment">Monte la racine «/»</p>
						<p class="fragment">Permet de lancer le premier process «UserLand»</p>
					</section>
					<section>
						<h2>Le premier process</h2>
						<p class="fragment">C'est l'unique process chargé directement par le noyau</p>
						<p class="fragment">Charge les deamons et outils de l'espace utilisateur</p>
						<p class="fragment">Configurable (qu'est-ce qu'on démarre?)</p>
						<p class="fragment">Les plus connus sont :</p>
						<ul class="fragment">
							<li>init (System V)</li>
							<li>systemd</li>
							<li>upstart</li>
							<li>openrc</li>
						</ul>
					</section>
					<section>
						<h2>init</h2>
						<p class="fragment">Origine Systeme V</p>
						<p class="fragment">Fichier de configuration /etc/inittab</p>
						<br><img class="fragment" height="50%" data-src="./medias/images/initconcept.png">
						<p class="fragment"></p>
					</section>
					<section>
						<h2>systemd</h2>
						<br><img class="fragment" height="50%" data-src="./medias/images/systemd-batman_robin.jpg">
					</section>
					<section>
						<h2>systemd</h2>
						<p class="fragment">Origine Fedora (Auteur Lennart Poettering)</p>
						<p class="fragment">Grosse usine à Gaz</p>
						<p class="fragment">Prend en charge l'ensemble du système de boot</p>
						<p class="fragment">Composé d'une 60aine de binaires</p>
						<p class="fragment">Temps de boot fortement réduit grâce à la //</p>
						<p class="fragment">Outils à connaitre :</p>
						<ul class="fragment">
							<li>systemctl</li>
							<li>journalctl</li>	
						</ul>
						<p class="fragment">Source de troll</p>
					</section>
					<section>
						<h2>Mise en application</h2>
						<p class="fragment">Configurer le système pour lancer sshd au boot.</p>
					</section>
				</section>
				<section data-background="#88EE88">
					<section>
						<h1>La gestion des logs</h1>
						<img height="400px" data-src="./medias/images/logs.jpg">
					</section>
					<section>
						<h2>syslog</h2>
						<p class="fragment">Daemon syslogd</p>
						<p class="fragment">Reçois les messages émis par le noyau et certains services</p>
						<p class="fragment">Permet de choisir la destination</p>
						<p class="fragment">Plusieurs critères : origine / sévérité</p>
						<p class="fragment">Fichier de configuration : /etc/syslog.conf</p>
					</section>
					<section>
						<h2>journal</h2>
						<p class="fragment">Daemon journald</p>
						<p class="fragment">Peut remplacer syslog</p>
						<p class="fragment">Enregistre les logs dans un fichier indexé (~base de données)</p>
						<p class="fragment">Fichier de configuration : /etc/systemd/journald.conf</p>
					</section>
					<section>
						<h2>Fichier de log trop gros ? Logrotate !</h2>
						<p class="fragment">Permet de faire de la rotation de log</p>
						<p class="fragment">Fortement paramétrable</p>
						<p class="fragment">Permet compresser</p>
						<p class="fragment">Attention à la durée légale de rétention</p>
						<p class="fragment">Généralement lancé par une tâche planifiée (cron)</p>
					</section>
					<section>
						<h2>Mise en application</h2>
						<p>Dans les logs, trouver les traces du démarrage du daemon sshd</p>
						<p>Déclencher une rotation de log avec les archives ayant le format avec le timestamp unix</p>
					</section>
				</section>	
				<section data-background="#888888">
					<section>
						<h1>Les tâche planifiées</h1>
						<img height="400px" data-src="./medias/images/cron_lapin.jpg">
					</section>
					<section>
						<h2>cron</h2>
						<p class="fragment">Daemon crond</p>
						<p class="fragment">Fichier /etc/crontab</p>
						<table class="fragment" style="font-size:15px;">
							<tr>
								<td>30</td><td>16</td><td>*</td><td>*</td><td>*</td><td>root</td><td>echo "il est `date`" &gt; /tmp/cron.exemple</td>
							</tr>
							<tr>
								<td>minute</td><td>heure</td><td>jour du<br>mois (0-31)</td><td>Mois (1-12)</td><td>Jour de<br>la semaine</td><td>user executant<br>la commande</td><td>Commande<br>à exécuter</td>
							</tr>
						</table>
						<p class="fragment">Si utilisé sur un Desktop éteint la nuit : anacron</p>
					</section>
					<section>
						<h2>Mise en application</h2>
						<p>Lancer une tache toute les 2 minutes qui écrira la date dans un fichier temporaire</p>
					</section>
				</section>	
					

				<section style="text-align: left;">
					<h1>THE END</h1>
					<p>
						<a href="https://github.com/hakimel/reveal.js">Slides fait avec reveal.js</a>
						</p>
						<p>licence : CC BY-SA 3.0</p>

				</section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
